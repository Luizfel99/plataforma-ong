<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Obrigado pela Doação</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <header>
    <h1>Plataforma ONG</h1>
    <nav>
      <ul>
        <li><a href="index.html">Início</a></li>
        <li><a href="sobre.html">Sobre</a></li>
        <li><a href="projetos.html">Projetos</a></li>
        <li><a href="voluntariado.html">Voluntariado</a></li>
        <li><a href="doacoes.html" aria-current="page">Doações</a></li>
        <li><a href="transparencia.html">Transparência</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="contato.html">Contato</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section>
      <h2>Obrigado!</h2>
      <div id="thankyou">
        <p>Processando informações da doação...</p>
      </div>
      <div id="recentDonations" style="margin-top:18px">
        <h3>Doações de demonstração</h3>
        <div id="donationList">Carregando...</div>
        <p><button id="clearDonations" class="btn-secondary">Limpar histórico</button></p>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-meta">
      <div class="social">
        <a href="#" aria-label="Facebook"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M22 12a10 10 0 10-11.5 9.9v-7H8.5v-3h2v-2.3c0-2 1.2-3.1 3-3.1.9 0 1.8.1 1.8.1v2h-1c-1 0-1.3.6-1.3 1.2V12h2.3l-.4 3h-1.9v7A10 10 0 0022 12z"/></svg></a>
        <a href="#" aria-label="Instagram"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M7 2h10a5 5 0 015 5v10a5 5 0 01-5 5H7a5 5 0 01-5-5V7a5 5 0 015-5zm5 6.5A4.5 4.5 0 1016.5 13 4.5 4.5 0 0012 8.5zm6.8-3.4a1.2 1.2 0 11-1.2-1.2 1.2 1.2 0 011.2 1.2z"/></svg></a>
        <a href="#" aria-label="LinkedIn"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4.98 3.5A2.5 2.5 0 007.5 6a2.5 2.5 0 01-2.52 2.5A2.5 2.5 0 014.98 3.5zM3 9h4v12H3zM9 9h3.8v1.6h.1a4.2 4.2 0 013.8-2.1c4.1 0 4.9 2.7 4.9 6.2V21H19v-5.4c0-1.3 0-3-1.8-3s-2.1 1.4-2.1 2.9V21H9z"/></svg></a>
      </div>
      <p>&copy; 2025 Plataforma ONG - Todos os direitos reservados.</p>
    </div>
  </footer>

  <script>
  (function(){
    function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]); }); }
    var params = new URLSearchParams(window.location.search);
    var nome = params.get('nome') || '';
    var valor = params.get('valor') || '';
    var recorrente = params.get('recorrente') || 'nao';
    var container = document.getElementById('thankyou');
    if (!nome || !valor) {
      container.innerHTML = '<p>Não encontramos informações da doação. Se o problema persistir, entre em contato conosco.</p>';
    } else {
      var text = '<p>Obrigado, <strong>'+escapeHtml(nome)+'</strong>! Sua doação de <strong>' + (Number(valor).toLocaleString('pt-BR',{style:'currency',currency:'BRL'})) + '</strong> foi recebida.';
      if (recorrente && recorrente !== 'nao') text += ' Esta doação é <strong>recorrente ('+escapeHtml(recorrente)+')</strong>.';
      text += '</p><p>Enviaremos um recibo por e-mail em breve.</p><p><a href="index.html">Voltar ao site</a></p>';
      container.innerHTML = text;
    }

    // Render recent donations from localStorage
    try {
      var storeKey = 'plataforma_doacoes';
      var list = JSON.parse(localStorage.getItem(storeKey) || '[]');
      var listContainer = document.getElementById('donationList');
      if (!list || list.length === 0) {
        listContainer.innerHTML = '<p>Sem doações de demonstração.</p>';
      } else {
        var html = '<ul>';
        list.forEach(function(r){
          html += '<li><strong>'+escapeHtml(r.nome)+'</strong> — ' + (Number(r.valor).toLocaleString('pt-BR',{style:'currency',currency:'BRL'})) + ' <em>('+(r.recorrente==='mensal'?'recorrente':'única')+')</em></li>';
        });
        html += '</ul>';
        listContainer.innerHTML = html;
      }
      document.getElementById('clearDonations').addEventListener('click', function(){
        if (confirm('Deseja limpar o histórico de doações de demonstração?')){
          localStorage.removeItem(storeKey);
          document.getElementById('donationList').innerHTML = '<p>Sem doações de demonstração.</p>';
        }
      });
    } catch (err) {
      // ignore
    }
  })();
  </script>
</body>
</html>